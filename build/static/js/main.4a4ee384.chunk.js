(this.webpackJsonpravenous=this.webpackJsonpravenous||[]).push([[0],{26:function(e,t,n){e.exports=n(48)},31:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},46:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(11),i=n.n(o),s=(n(31),n(7)),c=n(9),l={title:"light",background:"#cca353",color:"#fff",text:"#000"},u={title:"dark",bodyBackground:"#363537",background:"#363537",color:"#cca353",text:"#fff"},h=n(17);function d(){var e=Object(h.a)(['\nhtml {\n  font-size: 18px;\n}\n\n@media only screen and (max-width: 560px) {\n  html {\n    font-size: 15px;\n  }\n}\n\ninput:focus {\n  outline: none;\n}\n\n/* Reusable Component - Image Container */\n\n.image-container {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  overflow: hidden;\n  background: #000;\n}\n\n.image-container img {\n  width: 100%;\n}\n\n/* App Styles */\n\n.App {\n  font-family: "Work Sans", sans-serif;\n}\n\nbody {\n  background: ',"\n}\n\nheader {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0 20px;\n  background: ",";\n}\n\nh1 {\n  padding: 0.66rem 0;\n  text-align: center;\n  background-color: ",";\n  font-family: Poppins, sans-serif;\n  font-size: 1.8rem;\n  color: ","\n}\n\nh2, p, strong  {\n  color: ","\n\n}\n\nh3 {\n  color: ","\n}\n\na {\n  text-decoration: none;\n  color: inherit;\n}\n"]);return d=function(){return e},e}var p=Object(c.b)(d(),(function(e){return e.theme.bodyBackground}),(function(e){return e.theme.background}),(function(e){return e.theme.background}),(function(e){return e.theme.color}),(function(e){return e.theme.text}),(function(e){return e.theme.color})),m=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_YELP_KEY,f={search:function(e,t,n,a){return fetch("https://api.yelp.com/v3/businesses/search?term=".concat(e,"&location=").concat(t,"&sort_by=").concat(n,"&price=").concat(a,"&locale=pt_BR"),{headers:{Authorization:"Bearer ".concat(m)}}).then((function(e){return e.json()})).then((function(e){if(null===e||void 0===e?void 0:e.businesses)return e.businesses.map((function(e){return{id:e.id,imageSrc:e.image_url,url:e.url,phone:e.phone,name:e.name,price:e.price,address:e.location.address1,city:e.location.city,state:e.location.state,zipCode:e.location.zip_code,distance:e.distance,category:e.categories.map((function(e){return e.title})),rating:e.rating,reviewCount:e.review_count}}))}))},autocomplete:function(e,t,n){return fetch("https://api.yelp.com/v3/autocomplete?text=".concat(e,"&latitude=").concat(t,"&longitude=").concat(n),{headers:{Authorization:"Bearer ".concat(m)}}).then((function(e){return e.json()})).then((function(e){return console.table(e),console.count(),e.terms}))}},g=n(1),b=n(2),v=n(3),y=n(4),E=(n(34),n(35),function(e){Object(y.a)(n,e);var t=Object(v.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=encodeURI(this.props.business.address,this.props.business.city,this.props.business.state);return r.a.createElement("div",{className:"Business"},r.a.createElement("a",{className:"image-container",href:this.props.business.url,target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{src:this.props.business.imageSrc,alt:this.props.business.name})),r.a.createElement("h2",null,this.props.business.name),r.a.createElement("div",{className:"Business-information"},r.a.createElement("div",null,r.a.createElement("a",{href:"https://www.google.com/maps/search/?api=1&query=".concat(e),target:"_blank",rel:"noopener noreferrer"},r.a.createElement("p",null,this.props.business.address),r.a.createElement("p",null,this.props.business.city),r.a.createElement("p",null,this.props.business.state," ",this.props.business.zipCode)),r.a.createElement("p",null,r.a.createElement("em",null,(this.props.business.distance/1e3).toFixed(0)," km")),r.a.createElement("a",{href:"tel:".concat(this.props.business.phone)},r.a.createElement("strong",null,this.props.business.phone))),r.a.createElement("div",{className:"Business-reviews"},r.a.createElement("h3",null,this.props.business.category.join(", ")),r.a.createElement("h3",{className:"rating"},this.props.business.rating," stars"),r.a.createElement("strong",null,this.props.business.price),r.a.createElement("p",null,this.props.business.reviewCount," reviews"))))}}]),n}(r.a.Component)),O=function(e){Object(y.a)(n,e);var t=Object(v.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"BusinessList"},this.props.businesses.map((function(e){return r.a.createElement(E,{key:e.id,business:e})})))}}]),n}(r.a.Component),S=n(25),k=n(5),C=n(21),j=n.n(C),w=(n(36),n(22)),x=n.n(w),B=n(23),L=n.n(B),_=(n(46),function(e){Object(y.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(g.a)(this,n),(a=t.call(this,e)).handleChange=function(e){a.setState({address:e},(function(){return a.props.handleLocationChange(a.state.address)}))},a.handleSelect=function(e){a.setState({address:e},(function(){return a.props.handleLocationChange(a.state.address)}))},a.state={address:a.props.value},a}return Object(b.a)(n,[{key:"render",value:function(){return r.a.createElement(L.a,{value:this.state.address,onChange:this.handleChange,onSelect:this.handleSelect},(function(e){var t=e.getInputProps,n=e.suggestions,a=e.getSuggestionItemProps,o=e.loading;return r.a.createElement("div",null,r.a.createElement("input",t({placeholder:"Search Places ...",className:"location-search-input"})),r.a.createElement("div",{className:"autocomplete-dropdown-container"},o&&r.a.createElement("div",{className:"loading-box"},"Loading..."),n.map((function(e){var t=e.active?"suggestion-item--active":"suggestion-item",n=e.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return r.a.createElement("div",a(e,{className:t,style:n}),r.a.createElement("span",null,e.description))}))))}))}}]),n}(r.a.Component)),N=function(e){Object(y.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(g.a)(this,n),(a=t.call(this,e)).state={term:"",location:"",sortBy:"best_match",prices:[],latitude:0,longitude:0,autocompleteList:[{text:"Pizza"},{text:"Burger"}]},a.handleTermChange=a.handleTermChange.bind(Object(k.a)(a)),a.handleLocationChange=a.handleLocationChange.bind(Object(k.a)(a)),a.handleSearch=a.handleSearch.bind(Object(k.a)(a)),a.handlePriceChange=a.handlePriceChange.bind(Object(k.a)(a)),a.autocompleteYelp=a.autocompleteYelp.bind(Object(k.a)(a)),a.generateAutocompleteList=a.generateAutocompleteList.bind(Object(k.a)(a)),a.priceOptions={$:"1",$$:"2",$$$:"3",$$$$:"4"},a.sortByOptions={"Best Match":"best_match","Highest Rated":"rating","Most Reviewed":"review_count"},a.validator=new j.a({autoForceUpdate:Object(k.a)(a)}),a}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this;"geolocation"in navigator&&navigator.geolocation.getCurrentPosition((function(t){e.setState({latitude:t.coords.latitude,longitude:t.coords.longitude})})),this.generateAutocompleteList()}},{key:"generateAutocompleteList",value:function(){return this.state.autocompleteList}},{key:"autocompleteYelp",value:function(e,t,n){var a=this;f.autocomplete(e,t,n).then((function(e){a.setState({autocompleteList:e})}))}},{key:"getSortByClass",value:function(e){return this.state.sortBy===e?"active":""}},{key:"handleSortByChange",value:function(e){var t=this;this.setState({sortBy:e},(function(){t.handleSearch()}))}},{key:"handleTermChange",value:function(e){var t=this;this.setState({term:e.target.value},(function(){t.state.term.length>0&&t.autocompleteYelp(t.state.term,t.state.latitude,t.state.longitude)}))}},{key:"handleLocationChange",value:function(e){this.setState({location:e})}},{key:"handlePriceChange",value:function(e){var t=this,n=e.target,a=n.checked,r=n.value;if(a)return this.setState({prices:[].concat(Object(S.a)(this.state.prices),[r])},(function(){return t.handleSearch()}));var o=this.state.prices.filter((function(e){return e!==r}));return this.setState({prices:o},(function(){return t.handleSearch()}))}},{key:"handleSearch",value:function(e){e&&e.preventDefault(),this.validator.allValid()?this.props.searchYelp(this.state.term,this.state.location,this.state.sortBy,this.state.prices):this.validator.showMessages()}},{key:"renderSortByOptions",value:function(){var e=this;return Object.keys(this.sortByOptions).map((function(t){var n=e.sortByOptions[t];return r.a.createElement("li",{onClick:e.handleSortByChange.bind(e,n),className:e.getSortByClass(n),key:n},t)}))}},{key:"renderPriceOptions",value:function(){var e=this;return Object.keys(this.priceOptions).map((function(t){var n=e.priceOptions[t];return r.a.createElement("li",{key:n},r.a.createElement("input",{type:"checkbox",id:n,value:n,onChange:function(t){return e.handlePriceChange(t)}}),r.a.createElement("label",{htmlFor:n},t))}))}},{key:"render",value:function(){var e=this;return r.a.createElement("form",{className:"SearchBar",onSubmit:this.handleSearch},r.a.createElement("div",{className:"SearchBar-sort-options"},r.a.createElement("ul",null,this.renderSortByOptions()),r.a.createElement("ul",null,this.renderPriceOptions())),r.a.createElement("div",{className:"SearchBar-fields"},r.a.createElement("div",{className:"form-group"},r.a.createElement(x.a,{getItemValue:function(e){return e.text},items:this.state.autocompleteList,menuStyle:{borderRadius:"4px",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.1)",background:"rgba(255, 255, 255, 0.9)",padding:"2px 0",fontSize:"90%",overflow:"auto",maxHeight:"50%",width:"23rem",minWidth:"unset"},renderItem:function(e,t){return r.a.createElement("div",{style:{background:t?"lightgray":"white",marginTop:"5px",padding:"5px 10px"},key:e.text},e.text)},value:this.state.term,onChange:function(t){return e.handleTermChange(t)},onSelect:function(t){return e.setState({term:t})},inputProps:{placeholder:"Search for a Business*"}}),this.validator.message("term",this.state.term,"required")),r.a.createElement("div",{className:"form-group"},r.a.createElement(_,{handleLocationChange:this.handleLocationChange,value:this.state.location}),this.validator.message("location",this.state.location,"required"))),r.a.createElement("div",{className:"SearchBar-submit"},r.a.createElement("button",{type:"submit"}," Let's Go")))}}]),n}(r.a.Component),P=n(24),T=n.n(P),A=function(e){Object(y.a)(n,e);var t=Object(v.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){return r.a.createElement(T.a,{onChange:this.props.toggleTheme,checked:"dark"===this.props.theme,checkedIcon:!1,uncheckedIcon:!1,height:10,width:40,handleDiameter:20,offColor:"#363537",onColor:"#cca353"})}}]),n}(r.a.Component);var I=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],o=t[1],i=function(){var e=Object(a.useState)("light"),t=Object(s.a)(e,2),n=t[0],r=t[1],o=function(e){window.localStorage.setItem("theme",e),r(e)};return Object(a.useEffect)((function(){var e=window.localStorage.getItem("theme");window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&!e?o("dark"):e?r(e):o("light")}),[]),[n,function(){o("light"===n?"dark":"light")}]}(),h=Object(s.a)(i,2),d=h[0],m=h[1],g="light"===d?l:u;return r.a.createElement(c.a,{theme:g},r.a.createElement("div",{className:"App"},r.a.createElement(p,null),r.a.createElement("header",null,r.a.createElement("h1",null,"ravenous"),r.a.createElement(A,{theme:d,toggleTheme:m})),r.a.createElement(N,{searchYelp:function(e,t,n,a){0===a.length&&(a=["1","2","3","4"]),f.search(e,t,n,a).then((function(e){return o(e)}))}}),r.a.createElement(O,{businesses:n})))};i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(I,null)),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.4a4ee384.chunk.js.map